/* ===================================================
   Moelog AI Q&A – Consolidated CSS (修正版)
   命名空間說明:
   - 文章內清單: .moe-aiqna-block
   - 答案頁: body.moe-aiqna-answer 下所有樣式
   =================================================== */

/* --- 1. 文章內「問題清單」區塊 (.moe-aiqna-block) --- */

.moe-aiqna-block {
	margin: -0.2em 0 1.2em 0;
	padding: 0.5em;
	border: 1px solid #F39C12;
	border-radius: 6px;
	background: #fff;
}

.moe-aiqna-block h3 {
	margin: 0 0 .6em;
	font-size: 1.3rem;
	line-height: 1.4;
	font-family: "Noto Sans TC", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

.moe-aiqna-block ul {
	list-style: none;
	margin: 0.1em 0 0 0.8em;
	padding: 0;
}

.moe-aiqna-block li {
	margin: .3em 0;
}

.moe-aiqna-block .moe-aiqna-link {
	display: inline-block;
	text-decoration: none;
	color: #1d8ac3;
	padding-left: 16px;
	line-height: 1.6em;
	font-family: "Noto Sans TC", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

.moe-aiqna-block .moe-aiqna-link:hover {
	color: #6D6D6D;
}

/* --- 2. 答案頁 (body.moe-aiqna-answer) - 全域設定 --- */

body.moe-aiqna-answer {
	margin: 24px auto;
	max-width: 880px;
	color: #222;
	font-family: "Noto Sans TC", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
	line-height: 1.85;
	background: #f5f5f0 !important;
}

/* 置中容器 - 修正背景圖路徑 */
.moe-aiqna-answer .moe-container {
	max-width: 880px;
	margin: 30px auto 0;
	padding: 0 16px;
	background: #F0EEE0 url(../images/moe-containerbg.gif);
}

/* Banner - 修正背景圖路徑 */
.moe-aiqna-answer .moe-banner {
	max-width: 790px;
	height: 250px;
	margin: 0 auto;
	background: #F0EEE0 url(../images/moe-banner.jpg) repeat-y;
}

/* --- 3. 答案頁標題與提問重現 --- */

.moe-aiqna-answer .moe-head {
	border-bottom: none;
	padding-bottom: 8px;
	margin-bottom: 16px;
}

.moe-aiqna-answer .moe-question-echo {
	margin: 0 0 4px 0;
	padding: 0 30px 16px 45px;
	font: 220%/100% "DotGothic16", sans-serif;
	text-shadow: 0 2px 0 #d1d1d1;
	color: #1d8ac3;
}

/* --- 4. 答案頁內文排版 --- */

.moe-aiqna-answer .moe-answer-wrap p {
	margin: 0 0 1em;
	padding: 0 2.4em;
	font-size: 120%;
	color: #666;
}

.moe-aiqna-answer .moe-answer-wrap ul,
.moe-aiqna-answer .moe-answer-wrap ol {
	margin: 0.5em 2.4em 1em 2.4em; /* 左右與 p 的 padding 對齊 */
	padding: 0 0 0 1.4em;          /* 只留給 bullet/數字的空間 */
	color: #666;
	font-size: 105%;
}

.moe-aiqna-answer .moe-answer-wrap li {
	margin: 0.3em 0;
	color: #666;
}

/* Markdown: 巢狀列表縮排 */
.moe-aiqna-answer .moe-answer-wrap ul ul,
.moe-aiqna-answer .moe-answer-wrap ol ol,
.moe-aiqna-answer .moe-answer-wrap ul ol,
.moe-aiqna-answer .moe-answer-wrap ol ul {
	margin: 0.2em 0 0.2em 0;
	padding-left: 1.4em;
	font-size: 100%; /* 不再繼承縮小 */
}

/* Markdown: 粗體 / 斜體 */
.moe-aiqna-answer .moe-answer-wrap strong {
	font-weight: 700;
	color: #555;
}
.moe-aiqna-answer .moe-answer-wrap em {
	font-style: italic;
	color: #666;
}

/* Markdown: 裸 URL（由 PHP 轉換的 span） */
.moe-aiqna-answer .moe-answer-wrap .moe-url {
	word-break: break-all;
	color: #888;
	font-size: 0.9em;
}

.moe-aiqna-answer .moe-answer-wrap pre {
	padding: .75em 1em;
	background: #fafafa;
	border-radius: 6px;
	overflow: auto;
	margin: 1em 2.4em;
}

.moe-aiqna-answer .moe-answer-wrap code {
	font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
	background: #f5f5f5;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 0.9em;
}

.moe-aiqna-answer .moe-answer-wrap pre code {
	background: transparent;
	padding: 0;
}

/* Markdown: 標題 */
.moe-aiqna-answer .moe-answer-wrap h1,
.moe-aiqna-answer .moe-answer-wrap h2,
.moe-aiqna-answer .moe-answer-wrap h3,
.moe-aiqna-answer .moe-answer-wrap h4,
.moe-aiqna-answer .moe-answer-wrap h5,
.moe-aiqna-answer .moe-answer-wrap h6 {
	margin: 1.4em 0 0.6em;
	padding: 0 2.4em;
	color: #666;
	line-height: 1.4;
	font-family: "Noto Sans TC", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
	text-shadow: none;
}
.moe-aiqna-answer .moe-answer-wrap h2 { font-size: 1.4em; padding-bottom: 0.3em; }
.moe-aiqna-answer .moe-answer-wrap h3 { font-size: 1.2em; }
.moe-aiqna-answer .moe-answer-wrap h4 { font-size: 1.05em; }

/* Markdown: 表格 */
.moe-aiqna-answer .moe-answer-wrap table {
	border-collapse: collapse;
	width: auto;
	max-width: 100%;
	margin: 1em 2.4em 1em calc(2.4em + 15px);
	font-size: 100%;
	line-height: 1.5;
	color: #666;
}
.moe-aiqna-answer .moe-answer-wrap th,
.moe-aiqna-answer .moe-answer-wrap td {
	border: 1px solid #ddd;
	padding: 0.5em 0.8em;
	color: #666;
}
.moe-aiqna-answer .moe-answer-wrap th {
	background: #f0eed8;
	font-weight: 600;
	color: #666;
}
.moe-aiqna-answer .moe-answer-wrap tr:nth-child(even) {
	background: #fafaf5;
}

/* Markdown: 引用區塊 */
.moe-aiqna-answer .moe-answer-wrap blockquote {
	margin: 1em 2.4em;
	padding: 0.6em 1.2em;
	border-left: 4px solid #94B800;
	background: #fafaf5;
	color: #555;
	font-style: italic;
}
.moe-aiqna-answer .moe-answer-wrap blockquote p {
	padding: 0;
	margin: 0.4em 0;
}

/* Markdown: 分隔線 */
.moe-aiqna-answer .moe-answer-wrap hr {
	border: none;
	border-top: 1px solid #e0e0e0;
	margin: 1.5em 2.4em;
}

/* Markdown: 刪除線 */
.moe-aiqna-answer .moe-answer-wrap del {
	color: #999;
	text-decoration: line-through;
}

/* Markdown: 連結 */
.moe-aiqna-answer .moe-answer-wrap a {
	color: #1d8ac3;
	text-decoration: none;
}
.moe-aiqna-answer .moe-answer-wrap a:hover {
	color: #94B800;
	text-decoration: underline;
}

/* --- 5. 底部關閉區域 --- */

.moe-aiqna-answer .moe-close-area {
	margin: 20px 0 0;
	padding: 0 2.4em;
	text-align: center;
}

/* 底部裝飾 - 修正背景圖路徑 */
.moe-aiqna-answer .moe-bottom {
	height: 54px;
	margin: 0 auto;
	background: #f5f5f0 url(../images/moe-bottom.gif) no-repeat center;
	color: #666;
	clear: both;
}

.moe-aiqna-answer .moe-close-btn {
	display: inline-block;
	padding: .6em 1.2em;
	border: none !important;
	border-radius: 6px;
	text-decoration: none;
	background: #f5f5f5;
	color: #94B800;
	font-size: 1em;
	font-weight: 500;
	outline: none !important;
	transition: background .2s, transform .05s ease-in-out;
	cursor: pointer;
}

.moe-aiqna-answer .moe-close-btn:hover {
	background: #e7e7e7;
	color: #7a9600;
}

.moe-aiqna-answer .moe-close-btn:active {
	transform: scale(0.98);
}

.moe-aiqna-answer .moe-close-btn:focus,
.moe-aiqna-answer .moe-close-btn:active {
	outline: none !important;
	box-shadow: none !important;
}

.moe-aiqna-answer .moe-fallback {
	display: none;
	margin-top: 10px;
	font-size: 0.9em;
	color: #666;
	line-height: 1.6;
}

.moe-aiqna-answer .moe-fallback a {
	color: #94B800;
	text-decoration: none;
}

.moe-aiqna-answer .moe-fallback a:hover {
	text-decoration: underline;
}

/* --- 6. 原文連結區域 --- */

.moe-original-section {
	padding: 20px 2.4em;
	font-size: 110%;
	color: #666;
	margin-top: 30px;
	/* border-top: 1px dashed #ddd; */ /* 移除虛線 */
	line-height: 1.6;
}

.moe-original-link {
	color: #94B800;
	text-decoration: none;
	word-break: break-all;
}

.moe-original-link:hover {
	color: #69644e;
	text-decoration: underline;
}

/* --- 7. 免責聲明 --- */

.moe-disclaimer {
	margin: 20px auto 0;
	text-align: center;
	font-size: 0.9em;
	color: #999;
	line-height: 1.6;
	padding: 15px 20px;
	max-width: 880px;
}

/* ===================================================
   8. 手機版響應式設計
   =================================================== */

@media (max-width: 900px) {
	/* 移除背景圖片 */
	.moe-aiqna-answer .moe-container {
		margin: 0;
		padding: 0 12px;
		max-width: 100%;
		background: #FFFFFF !important;
	}

	.moe-aiqna-answer .moe-banner {
		display: none;
	}

	.moe-aiqna-answer .moe-bottom {
		background: #FFFFFF !important;
		height: 0px;
	}

	body.moe-aiqna-answer {
		margin: 0;
		padding: 0;
		background: #FFFFFF !important;
	}

	.moe-aiqna-answer .moe-question-echo {
		padding: 15px 15px 12px 15px;
		font-size: 160%;
		line-height: 1.3;
	}

	.moe-aiqna-answer .moe-answer-wrap p {
		padding: 0 15px;
		font-size: 110%;
	}

	.moe-aiqna-answer .moe-answer-wrap ul,
	.moe-aiqna-answer .moe-answer-wrap ol {
		margin: 0.5em 15px 1em 15px;
		padding-left: 1.4em;
		font-size: 105%;
	}

	.moe-aiqna-answer .moe-answer-wrap li {
		margin: 0.3em 0;
	}

	.moe-aiqna-answer .moe-answer-wrap pre {
		margin: 1em 15px;
	}

	.moe-aiqna-answer .moe-answer-wrap h1,
	.moe-aiqna-answer .moe-answer-wrap h2,
	.moe-aiqna-answer .moe-answer-wrap h3,
	.moe-aiqna-answer .moe-answer-wrap h4,
	.moe-aiqna-answer .moe-answer-wrap h5,
	.moe-aiqna-answer .moe-answer-wrap h6 {
		padding: 0 15px;
	}

	.moe-aiqna-answer .moe-answer-wrap table {
		margin: 1em 15px;
		display: block;
		overflow-x: auto;
		-webkit-overflow-scrolling: touch;
	}

	.moe-aiqna-answer .moe-answer-wrap blockquote {
		margin: 1em 15px;
	}

	.moe-aiqna-answer .moe-answer-wrap hr {
		margin: 1.5em 15px;
	}

	.moe-original-section {
		padding: 15px !important;
		margin: 20px 0 15px;
		font-size: 0.95em;
	}

	.moe-aiqna-answer .moe-close-area {
		padding: 0 15px;
		margin: 15px 0;
	}

	.moe-aiqna-answer .moe-close-btn {
		padding: .6em 1.2em;
		font-size: 0.95em;
	}

	.moe-disclaimer {
		padding: 10px 15px !important;
		font-size: 0.85em !important;
		line-height: 1.5em !important;
	}
}

/* 極小螢幕 (iPhone SE 等) */
@media (max-width: 375px) {
	.moe-aiqna-answer .moe-question-echo {
		padding: 12px 10px;
		font-size: 140%;
	}

	.moe-aiqna-answer .moe-answer-wrap p {
		padding: 0;
		font-size: 105%;
	}

	.moe-aiqna-answer .moe-answer-wrap h1,
	.moe-aiqna-answer .moe-answer-wrap h2,
	.moe-aiqna-answer .moe-answer-wrap h3 {
		padding: 0 10px;
	}

	.moe-aiqna-answer .moe-answer-wrap table {
		margin: 1em 10px;
		font-size: 0.85em;
	}

	.moe-original-section {
		padding: 10px !important;
		font-size: 0.9em;
	}

	.moe-aiqna-answer .moe-close-area {
		padding: 0 10px;
	}
}

/* ===================================================
   9. 打字效果與動畫
   =================================================== */

.moe-typing-cursor {
	display: inline-block;
	width: 2px;
	height: 1.2em;
	background: #666;
	margin-left: 2px;
	animation: moe-blink 1s step-end infinite;
	vertical-align: baseline;
}

@keyframes moe-blink {
	50% { opacity: 0; }
}

/* ===================================================
   10. 輔助類別
   =================================================== */

.moe-answer-wrap {
	word-wrap: break-word;
	word-break: break-word;
	overflow-wrap: anywhere;
	max-width: 100%;
}

.moe-answer-noscript {
	padding: 20px 2.4em;
}

/* 載入動畫(可選) */
.moe-loading {
	text-align: center;
	padding: 40px;
	color: #999;
}

.moe-loading::after {
	content: '...';
	animation: moe-loading-dots 1.5s steps(4, end) infinite;
}

@keyframes moe-loading-dots {
	0%, 20% { content: '.'; }
	40% { content: '..'; }
	60%, 100% { content: '...'; }
}

/* --- 11. 文章回饋卡片 (.moe-feedback-card) --- */

.moe-feedback-card {
	margin: 50px auto 0px;
	padding: 22px;
	border-radius: 6px;
	background: #fff;
	border: 1px solid #E5E5E0;
	width: 75%;
	max-width: 540px;
	min-width: 280px;
}

.moe-feedback-title {
	margin: 0 0 16px;
	font-size: 16px;
	text-align: center;
	color: #1d8ac3;
	font-family: "Noto Sans TC", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
	font-weight: 500;
}

.moe-feedback-actions {
	display: flex;
	gap: 16px;
	justify-content: center;
	flex-wrap: wrap;
}

.moe-feedback-btn {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 12px 24px;
	border-radius: 50px;
	border: 1px solid #e0e0e0;
	background: #f5f5f5;
	font-size: 15px;
	font-weight: 500;
	color: #666;
	cursor: pointer;
	transition: all .25s ease;
}

.moe-feedback-btn img {
	width: 20px;
	height: 20px;
	display: block;
	flex-shrink: 0;
}

/* 所有按鈕 hover 狀態 */
.moe-feedback-btn:hover {
	background: #f5f5f5;
	border-color: #d0d0d0;
}

/* 所有按鈕選擇後（active）狀態 */
.moe-feedback-btn.is-active {
	background: #ffaa00;
	border-color: #ffaa00;
	color: #fff;
}

.moe-feedback-report {
	margin-top: 20px;
	text-align: center;
}

.moe-feedback-report textarea {
	width: 80%;
	min-height: 140px;
	border-radius: 12px;
	border: 1px solid #dcdcdc;
	padding: 14px;
	font-size: 0.85rem;
	resize: vertical;
	color: #666;
	font-family: "Noto Sans TC", "Noto Sans JP", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
}

.moe-feedback-report-actions {
	margin-top: 12px;
	display: flex;
	justify-content: center;
	gap: 12px;
}

.moe-feedback-secondary,
.moe-feedback-primary {
	padding: 9px 22px;
	border-radius: 40px;
	font-size: 0.75rem;
	font-weight: 600;
	border: 1px solid #111;
	cursor: pointer;
}

.moe-feedback-secondary {
	background: #fff;
	color: #111;
}

.moe-feedback-primary {
	background: #111;
	color: #fff;
}

p#moe-feedback-message {
	margin-top: 20px;
	margin-bottom: 0px;
	text-align: center;
	font-size: 16px;
}

p#moe-feedback-message[data-state="error"] {
	color: #c0392b;
}

p#moe-feedback-message[data-state="success"] {
	color: #1f7a1f;
}

.moe-feedback-stats {
	display: flex;
	justify-content: center;
	gap: 24px;
	margin: 20px 0 10px;
	font-size: 10px;
	color: #444;
}

.moe-feedback-stat {
	display: flex;
	align-items: center;
	gap: 8px;
}

.moe-feedback-stat img {
	width: 18px;
	height: 18px;
	display: block;
}

.moe-feedback-stat strong {
	font-size: 14px;
}

@media (max-width: 900px) {
	.moe-feedback-card {
		width: 100%;
		min-width: auto;
		padding: 20px;
	}

	.moe-feedback-actions {
		gap: 10px;
	}

	.moe-feedback-btn {
		flex: 1 1 calc(50% - 10px);
		justify-content: center;
	}
}