# åœ‹éš›åŒ– (i18n)

Moelog AI Q&A Links çš„å¤šèªè¨€æ”¯æ´èˆ‡ç¿»è­¯é–‹ç™¼æŒ‡å—ã€‚

## ğŸ“‹ ç›®éŒ„

- [æ¦‚è¿°](#æ¦‚è¿°)
- [æ”¯æ´çš„èªè¨€](#æ”¯æ´çš„èªè¨€)
- [æª”æ¡ˆçµæ§‹](#æª”æ¡ˆçµæ§‹)
- [ç¿»è­¯é–‹ç™¼](#ç¿»è­¯é–‹ç™¼)
- [ç·¨è­¯ .mo æª”æ¡ˆ](#ç·¨è­¯-mo-æª”æ¡ˆ)
- [æ–°å¢èªè¨€](#æ–°å¢èªè¨€)
- [ç¿»è­¯å­—ä¸²è¦ç¯„](#ç¿»è­¯å­—ä¸²è¦ç¯„)

---

## ğŸ“– æ¦‚è¿°

- **Text Domain**: `moelog-ai-qna`
- **èªè¨€ç›®éŒ„**: `languages/`
- **ç¿»è­¯å‡½æ•¸**: ä½¿ç”¨ WordPress æ¨™æº– i18n API

---

## ğŸŒ æ”¯æ´çš„èªè¨€

| èªè¨€ | Locale | æª”æ¡ˆ | ç‹€æ…‹ |
|------|--------|------|------|
| ç¹é«”ä¸­æ–‡ | `zh_TW` | `moelog-ai-qna-zh_TW.po` | âœ… å®Œæ•´ |
| English (US) | `en_US` | `moelog-ai-qna-en_US.po` | âœ… å®Œæ•´ |
| æ—¥æœ¬èª | `ja` | `moelog-ai-qna-ja.po` | âœ… å®Œæ•´ |

---

## ğŸ“ æª”æ¡ˆçµæ§‹

```
languages/
â”œâ”€â”€ moelog-ai-qna.pot           # ç¿»è­¯æ¨¡æ¿ (POT)
â”œâ”€â”€ moelog-ai-qna-zh_TW.po      # ç¹é«”ä¸­æ–‡ç¿»è­¯
â”œâ”€â”€ moelog-ai-qna-zh_TW.mo      # ç¹é«”ä¸­æ–‡ç·¨è­¯æª”
â”œâ”€â”€ moelog-ai-qna-en_US.po      # è‹±æ–‡ç¿»è­¯
â”œâ”€â”€ moelog-ai-qna-en_US.mo      # è‹±æ–‡ç·¨è­¯æª”
â”œâ”€â”€ moelog-ai-qna-ja.po         # æ—¥æ–‡ç¿»è­¯
â””â”€â”€ moelog-ai-qna-ja.mo         # æ—¥æ–‡ç·¨è­¯æª”
```

### æª”æ¡ˆé¡å‹èªªæ˜

| é¡å‹ | èªªæ˜ | ç”¨é€” |
|------|------|------|
| `.pot` | Portable Object Template | ç¿»è­¯æ¨¡æ¿ï¼ŒåŒ…å«æ‰€æœ‰å¯ç¿»è­¯å­—ä¸² |
| `.po` | Portable Object | ç¿»è­¯æª”ï¼Œäººé¡å¯è®€æ ¼å¼ |
| `.mo` | Machine Object | ç·¨è­¯å¾Œçš„äºŒé€²ä½æª”ï¼ŒWordPress è¼‰å…¥ä½¿ç”¨ |

---

## ğŸ”§ ç¿»è­¯é–‹ç™¼

### æå–å­—ä¸² (æ›´æ–° POT)

ä½¿ç”¨ WP-CLIï¼š

```bash
wp i18n make-pot . languages/moelog-ai-qna.pot \
    --slug=moelog-ai-qna \
    --domain=moelog-ai-qna \
    --include="*.php,includes/*.php,templates/*.php"
```

æˆ–ä½¿ç”¨ xgettextï¼š

```bash
find . -name "*.php" -not -path "./vendor/*" | xargs xgettext \
    --language=PHP \
    --keyword=__ \
    --keyword=_e \
    --keyword=_n:1,2 \
    --keyword=_x:1,2c \
    --keyword=_ex:1,2c \
    --keyword=_nx:1,2,4c \
    --keyword=esc_html__ \
    --keyword=esc_html_e \
    --keyword=esc_attr__ \
    --keyword=esc_attr_e \
    --from-code=UTF-8 \
    --output=languages/moelog-ai-qna.pot
```

### æ›´æ–°ç¿»è­¯æª” (.po)

ä½¿ç”¨ Poedit æˆ– msgmergeï¼š

```bash
# åˆä½µ POT åˆ°ç¾æœ‰ PO
msgmerge -U languages/moelog-ai-qna-zh_TW.po languages/moelog-ai-qna.pot
```

### ç¿»è­¯å·¥å…·æ¨è–¦

| å·¥å…· | å¹³å° | èªªæ˜ |
|------|------|------|
| [Poedit](https://poedit.net/) | Windows/Mac/Linux | GUI ç¿»è­¯ç·¨è¼¯å™¨ï¼Œå¯è‡ªå‹•ç·¨è­¯ .mo |
| [Loco Translate](https://wordpress.org/plugins/loco-translate/) | WordPress æ’ä»¶ | åœ¨å¾Œå°ç›´æ¥ç¿»è­¯ |
| msgfmt | CLI | GNU gettext å‘½ä»¤åˆ—å·¥å…· |

---

## âš™ï¸ ç·¨è­¯ .mo æª”æ¡ˆ

### ä½¿ç”¨ msgfmt (æ¨è–¦)

```bash
# ç·¨è­¯å–®ä¸€èªè¨€
msgfmt -o languages/moelog-ai-qna-zh_TW.mo languages/moelog-ai-qna-zh_TW.po

# ç·¨è­¯æ‰€æœ‰èªè¨€
for po in languages/*.po; do
    mo="${po%.po}.mo"
    msgfmt -o "$mo" "$po"
    echo "Compiled: $mo"
done
```

### ä½¿ç”¨ WP-CLI

```bash
wp i18n make-mo languages/
```

### ä½¿ç”¨ Poedit

1. é–‹å•Ÿ `.po` æª”æ¡ˆ
2. é¸å–® â†’ File â†’ Compile to MO

---

## â• æ–°å¢èªè¨€

### æ­¥é©Ÿ 1: è¤‡è£½ POT ç‚ºæ–° PO

```bash
# ä»¥ç°¡é«”ä¸­æ–‡ç‚ºä¾‹
cp languages/moelog-ai-qna.pot languages/moelog-ai-qna-zh_CN.po
```

### æ­¥é©Ÿ 2: æ›´æ–° PO Header

ç·¨è¼¯ `.po` æª”æ¡ˆé ­éƒ¨ï¼š

```po
"Project-Id-Version: Moelog AI Q&A Links 1.10.2\n"
"Language-Team: Chinese (Simplified)\n"
"Language: zh_CN\n"
"Plural-Forms: nplurals=1; plural=0;\n"
```

### æ­¥é©Ÿ 3: ç¿»è­¯å­—ä¸²

ä½¿ç”¨ Poedit æˆ–æ–‡å­—ç·¨è¼¯å™¨ç¿»è­¯æ¯å€‹ `msgstr`ï¼š

```po
#: includes/class-admin.php:123
msgid "Save Settings"
msgstr "ä¿å­˜è®¾ç½®"
```

### æ­¥é©Ÿ 4: ç·¨è­¯ MO

```bash
msgfmt -o languages/moelog-ai-qna-zh_CN.mo languages/moelog-ai-qna-zh_CN.po
```

---

## ğŸ“ ç¿»è­¯å­—ä¸²è¦ç¯„

### ä½¿ç”¨çš„ WordPress å‡½æ•¸

| å‡½æ•¸ | ç”¨é€” | ç¯„ä¾‹ |
|------|------|------|
| `__()` | è¿”å›ç¿»è­¯å­—ä¸² | `__('Hello', 'moelog-ai-qna')` |
| `_e()` | è¼¸å‡ºç¿»è­¯å­—ä¸² | `_e('Hello', 'moelog-ai-qna')` |
| `esc_html__()` | HTML è·³è„« + è¿”å› | `esc_html__('Hello', 'moelog-ai-qna')` |
| `esc_html_e()` | HTML è·³è„« + è¼¸å‡º | `esc_html_e('Hello', 'moelog-ai-qna')` |
| `esc_attr__()` | å±¬æ€§è·³è„« + è¿”å› | `esc_attr__('Hello', 'moelog-ai-qna')` |
| `sprintf()` | å¸¶è®Šæ•¸çš„ç¿»è­¯ | `sprintf(__('Count: %d', 'moelog-ai-qna'), $n)` |
| `_n()` | è¤‡æ•¸å½¢å¼ | `_n('%d item', '%d items', $n, 'moelog-ai-qna')` |
| `_x()` | å¸¶ä¸Šä¸‹æ–‡ | `_x('Post', 'noun', 'moelog-ai-qna')` |

### ç¨‹å¼ç¢¼ç¯„ä¾‹

```php
// ç°¡å–®å­—ä¸²
echo __('Settings saved.', 'moelog-ai-qna');

// HTML è¼¸å‡º
esc_html_e('API Connection Test', 'moelog-ai-qna');

// å¸¶è®Šæ•¸
printf(
    __('Found %d questions in this post.', 'moelog-ai-qna'),
    count($questions)
);

// è¤‡æ•¸å½¢å¼
$message = sprintf(
    _n(
        '%d cache file deleted.',
        '%d cache files deleted.',
        $count,
        'moelog-ai-qna'
    ),
    $count
);

// å¸¶ä¸Šä¸‹æ–‡ (ç›¸åŒè‹±æ–‡ä¸åŒå«ç¾©)
_x('Draft', 'post status', 'moelog-ai-qna');
_x('Draft', 'email draft', 'moelog-ai-qna');
```

### å­—ä¸²æ ¼å¼è¦ç¯„

#### 1. é¿å…å­—ä¸²é€£æ¥

```php
// âŒ éŒ¯èª¤ï¼šç¿»è­¯è€…ç„¡æ³•æ­£ç¢ºè™•ç†
echo __('Total: ', 'moelog-ai-qna') . $count . __(' items', 'moelog-ai-qna');

// âœ… æ­£ç¢ºï¼šä½¿ç”¨ sprintf
printf(__('Total: %d items', 'moelog-ai-qna'), $count);
```

#### 2. ä½¿ç”¨å‘½åä½”ä½ç¬¦ (è¤‡é›œå­—ä¸²)

```php
// æ¨è–¦ï¼šç•¶æœ‰å¤šå€‹è®Šæ•¸æ™‚
printf(
    __('Post "%1$s" has %2$d questions.', 'moelog-ai-qna'),
    $post_title,
    $question_count
);
```

#### 3. HTML æ¨™ç±¤è™•ç†

```php
// åœ¨å­—ä¸²ä¸­åŒ…å« HTML
printf(
    __('Visit %s for more info.', 'moelog-ai-qna'),
    '<a href="https://example.com">' . esc_html__('our website', 'moelog-ai-qna') . '</a>'
);
```

---

## ğŸ” é©—è­‰ç¿»è­¯

### æª¢æŸ¥ PO èªæ³•

```bash
msgfmt --check languages/moelog-ai-qna-zh_TW.po
```

### æª¢æŸ¥éºæ¼ç¿»è­¯

```bash
msgattrib --untranslated languages/moelog-ai-qna-zh_TW.po
```

### çµ±è¨ˆç¿»è­¯é€²åº¦

```bash
msgfmt --statistics languages/moelog-ai-qna-zh_TW.po
# è¼¸å‡º: 170 translated messages.
```

---

## ğŸš€ è¼‰å…¥æ©Ÿåˆ¶

### WordPress è¼‰å…¥é †åº

1. `wp-content/languages/plugins/moelog-ai-qna-{locale}.mo`
2. `wp-content/plugins/moelog-ai-qna-links/languages/moelog-ai-qna-{locale}.mo`

### æ’ä»¶è¼‰å…¥ç¨‹å¼ç¢¼

```php
// åœ¨ä¸»æ’ä»¶æª”æ¡ˆä¸­
add_action('plugins_loaded', function() {
    load_plugin_textdomain(
        'moelog-ai-qna',
        false,
        dirname(plugin_basename(__FILE__)) . '/languages'
    );
});
```

---

## ğŸ“š ç›¸é—œè³‡æº

- [WordPress i18n å®˜æ–¹æ–‡æª”](https://developer.wordpress.org/plugins/internationalization/)
- [GNU gettext æ‰‹å†Š](https://www.gnu.org/software/gettext/manual/)
- [Poedit ä½¿ç”¨æ•™å­¸](https://poedit.net/tutorial)

---

æœ€å¾Œæ›´æ–°ï¼š2025-11-28

